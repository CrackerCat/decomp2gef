#!/bin/bash


cp $1 $1.test

echo "TESTING $1.test"

objcopy --add-symbol "'sub_1020'=.text:0x1020,global,function" --add-symbol "'sub_1030'=.text:0x1030,global,function" --add-symbol "'sub_1040'=.text:0x1040,global,function" --add-symbol "'sub_1050'=.text:0x1050,global,function" --add-symbol "'sub_1060'=.text:0x1060,global,function" --add-symbol "'sub_1070'=.text:0x1070,global,function" --add-symbol "'sub_1080'=.text:0x1080,global,function" --add-symbol "'sub_1090'=.text:0x1090,global,function" --add-symbol "'sub_10A0'=.text:0x10a0,global,function" --add-symbol "'sub_10B0'=.text:0x10b0,global,function" --add-symbol "'sub_10C0'=.text:0x10c0,global,function" --add-symbol "'sub_10D0'=.text:0x10d0,global,function" --add-symbol "'__cxa_finalize'=.text:0x10e0,global,function" --add-symbol "'start'=.text:0x11a0,global,function" --add-symbol "'sub_11D0'=.text:0x11d0,global,function" --add-symbol "'sub_1240'=.text:0x1240,global,function" --add-symbol "'newline_null_term'=.text:0x1289,global,function" --add-symbol "'get_int'=.text:0x12f9,global,function" --add-symbol "'hash_func'=.text:0x134c,global,function" --add-symbol "'show'=.text:0x13c4,global,function" --add-symbol "'delete'=.text:0x14ad,global,function" --add-symbol "'add'=.text:0x15b8,global,function" --add-symbol "'print_menu'=.text:0x16f8,global,function" --add-symbol "'setup'=.text:0x1757,global,function" --add-symbol "'main'=.text:0x17a8,global,function" --add-symbol "'init'=.text:0x1850,global,function" --add-symbol "'fini'=.text:0x18c0,global,function" --add-symbol "'free'=.text:0x48c0,global,function" --add-symbol "'puts'=.text:0x48c8,global,function" --add-symbol "'__stack_chk_fail'=.text:0x48d0,global,function" --add-symbol "'printf'=.text:0x48d8,global,function" --add-symbol "'memset'=.text:0x48e0,global,function" --add-symbol "'alarm'=.text:0x48e8,global,function" --add-symbol "'read'=.text:0x48f0,global,function" --add-symbol "'__libc_start_main'=.text:0x48f8,global,function" --add-symbol "'malloc'=.text:0x4900,global,function" --add-symbol "'setvbuf'=.text:0x4908,global,function" --add-symbol "'__isoc99_scanf'=.text:0x4910,global,function" --add-symbol "'exit'=.text:0x4918,global,function" --add-symbol "'__imp___cxa_finalize'=.text:0x4920,global,function" --add-symbol "'__gmon_start__'=.text:0x4930,global,function" $1.test
rm $1.test
